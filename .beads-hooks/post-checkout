#!/usr/bin/env sh
# bd-shim v1
# bd-hooks-version: 0.44.0
#
# bd (beads) post-checkout hook - thin shim
#
# This shim delegates to 'bd hooks run post-checkout' which contains
# the actual hook logic. This pattern ensures hook behavior is always
# in sync with the installed bd version - no manual updates needed.

# Check if bd is available
if ! command -v bd >/dev/null 2>&1; then
    # Try via mise
    if command -v mise >/dev/null 2>&1; then
        exec mise exec -- bd hooks run post-checkout "$@"
    elif [ -x "$HOME/.local/bin/mise" ]; then
        exec "$HOME/.local/bin/mise" exec -- bd hooks run post-checkout "$@"
    fi

    # Silently skip - post-checkout is called frequently
    exit 0
fi

exec bd hooks run post-checkout "$@"
